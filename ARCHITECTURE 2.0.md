# FirstWordsAnalyzer - Архітектура системи

## Загальний опис проекту

**FirstWordsAnalyzer** - це веб-додаток на ASP.NET MVC для аналізу спільнокореневих слів у текстах.
Система призначена для вивчення етимологічних зв'язків між словами, їх популярності та контексту використання в книжках.

Я написав проект для вивчення програмування по англомовним крижкам.
Для цього я завантажив 6 рекомендованих книжок й почав вчити переклад слів враховуючи їх популярність.
Картка слова містить: 
Перший розділ (Загальне): слово, перший переклад, другий переклад, третій переклад, кількість записів цього слова з урахуванням похідних слів, кількість похідних слів.
Другий розділ (Ланцюг похідних слів з контекстом): Відстань, Кількість, Слово, Перший переклад, Речення.
Третій розділ (Речення зі словом): Список перших 10 мінімальних речень.

## Технічний стек

### Основні технології
- **Платформа**: ASP.NET MVC 5.2.4
- **Фреймворк**: .NET Framework 4.7.1
- **База даних**: Microsoft SQL Server (Entity Framework 6.2.0)
- **Фронтенд**: HTML, CSS, JavaScript, Bootstrap 3.3.7, jQuery 3.3.1
- **Інструменти**: Visual Studio 2015+, IIS Express

### Додаткові компоненти
- **Пагінація**: PagedList 1.17.0.0
- **Аналітика**: Microsoft Application Insights
- **Автентифікація**: ASP.NET Identity 2.2.1
- **Оптимізація**: System.Web.Optimization, WebGrease
- **Тестування**: MSTest Framework

## Архітектурні патерни

### 1. Model-View-Controller (MVC)
Додаток використовує стандартний патерн MVC:
- **Models**: Сутності бази даних та бізнес-логіка
- **Views**: Razor-шаблони для відображення даних
- **Controllers**: Обробка HTTP-запитів та координація

### 2. Repository Pattern
Реалізовано для абстракції доступу до даних:
- `IRepository<T>` - синхронний репозиторій
- `IRepositoryAsynk<T>` - асинхронний репозиторій
- `IUnitOfWork` - патерн Unit of Work

### 3. Dependency Injection
Використовується для ін'єкції залежностей в контролерах.

## Структура проекту

### Основні папки

#### `/Controllers`
Контролери для обробки HTTP-запитів:
- `BooksController` - управління книгами
- `WordsController` - управління словами
- `CognatesController` - управління спільнокореневими словами
- `PotentialCognatesController` - потенційні спільнокореневі слова
- `SentencesController` - управління реченнями
- `WordsPopularityWithCognates2Controller` - аналіз популярності слів
- `HomeController` - головна сторінка
- `AccountController` - автентифікація
- `ManageController` - управління акаунтом

#### `/Models`
Модель даних Entity Framework:
- `Book` - книги
- `Word` - слова (з варіантами перекладу)
- `Sentence` - речення
- `SentenceWord` - зв'язок між реченнями та словами
- `Cognate` - спільнокореневі слова
- `PotentialCognate` - потенційні спільнокореневі слова
- `WordsPopularityWithCognates2` - популярність слів

#### `/Views`
Razor-шаблони для відображення:
- Стандартні CRUD-операції для кожної сутності
- Спеціальні представлення для аналізу спільнокореневих слів
- Шаблони автентифікації

#### `/Repositories`
Реалізація патерну Repository:
- `BookRepository` - асинхронний репозиторій для книг
- `WordsPopularityWithCognatesRepository` - аналіз популярності

#### `/Interfaces`
Інтерфейси для абстракції:
- `IRepository<T>` - базовий репозиторій
- `IRepositoryAsynk<T>` - асинхронний репозиторій  
- `IUnitOfWork` - Unit of Work

#### `/Database`
SQL-скрипти для складних запитів:
- `GetChainOfBasicWordsWithContext.sql` - ланцюжок базових слів
- `GetChainOfDerivedWordsWithContext.sql` - ланцюжок похідних слів
- Скрипти для очищення дублікатів

## Модель даних

### Основні сутності

#### Books
- `Id` (int, PK) - унікальний ідентифікатор
- `Author` (nvarchar(50)) - автор
- `Name` (nvarchar(50)) - назва книги
- `PublishingYear` (date) - рік видання

#### Words
- `Id` (int, PK) - унікальний ідентифікатор
- `Text` (nvarchar) - текст слова
- `FirstTranslationVariant` (nvarchar) - перший варіант перекладу
- `SecondTranslationVariant` (nvarchar) - другий варіант перекладу  
- `ThirdTranslationVariant` (nvarchar) - третій варіант перекладу
- `NoSense` (bit) - чи немає сенсу
- `NotBasic` (bit) - чи не є базовим словом

#### Sentences
- `Id` (int, PK) - унікальний ідентифікатор
- `BookId` (int, FK) - посилання на книгу
- `Text` (nvarchar(300)) - текст речення
- `Length` (numeric) - довжина речення

#### SentenceWords
- `SentenceId` (int, PK, FK) - посилання на речення
- `WordId` (int, PK, FK) - посилання на слово  
- `Number` (decimal, PK) - номер слова в реченні

#### Cognates
- `Id` (int, PK) - унікальний ідентифікатор
- `BasicWordId` (int, FK) - базове слово
- `DerivedWordId` (int, FK) - похідне слово
- `WordPart` (nvarchar(10)) - частина слова (корінь, суфікс тощо)
- `WrongAssociation` (bit) - чи є хибною асоціацією

### Зв'язки між сутностями
- **Book** 1:N **Sentence** - книга містить багато речень
- **Sentence** N:M **Word** (через SentenceWord) - речення містить слова
- **Word** 1:N **Cognate** (як базове слово) - слово може мати похідні
- **Word** 1:N **Cognate** (як похідне слово) - слово може бути похідним

## Бізнес-логіка

### Аналіз спільнокореневих слів
1. **Виявлення базових слів** - слова, які не є похідними від інших
2. **Побудова ланцюжків** - відстеження етимологічних зв'язків
3. **Контекстний аналіз** - показ слів у контексті речень
4. **Статистика популярності** - частота використання слів

### Алгоритми пошуку
- **Рекурсивний пошук** - використання Common Table Expressions (CTE)
- **Ланцюжки похідних слів** - побудова дерева спільнокореневих слів
- **Фільтрація хибних асоціацій** - виключення неправильних зв'язків

## Потік даних

### Основний сценарій використання
1. **Завантаження тексту** - додавання книги в систему
2. **Розбір на речення** - сегментація тексту
3. **Токенізація** - виділення окремих слів
4. **Аналіз етимології** - пошук спільнокореневих слів
5. **Побудова статистики** - аналіз популярності
6. **Візуалізація результатів** - відображення ланцюжків слів

### Взаємодія компонентів
```
Client Request → Controller → Repository → Entity Framework → SQL Server
                     ↓
                  View Engine → Razor Template → HTML Response
```

## Безпека

### Автентифікація
- **ASP.NET Identity** - система користувачів
- **OWIN middleware** - обробка автентифікації
- **Cookie-based authentication** - збереження сесій

### Авторизація
- **Role-based access** - контроль доступу за ролями
- **Action filters** - фільтрація запитів

## Продуктивність

### Оптимізації
- **Асинхронні операції** - для операцій з базою даних
- **Пагінація** - для великих наборів даних
- **Кешування** - Application Insights для моніторингу
- **Compression** - мінімізація та стиснення ресурсів

### Індексація
- **Первинні ключі** - для швидкого пошуку
- **Зовнішні ключі** - для joins
- **Композитні ключі** - для SentenceWords

## Розгортання

### Вимоги до середовища
- **Windows Server** з IIS
- **SQL Server** 2012+
- **.NET Framework 4.7.1**
- **Visual C++ Redistributable**

### Конфігурація
- **Connection strings** в Web.config
- **Application settings** для налаштувань
- **Logging** через Application Insights

## Тестування

### Структура тестів
- **Unit tests** - для контролерів
- **Integration tests** - для репозиторіїв
- **MSTest framework** - тестовий фреймворк

### Покритя тестами
- `BooksControllerTest` - тестування контролера книг
- `HomeControllerTest` - тестування головного контролера
- `WordsPopularityWithCognates2Test` - тестування аналізу популярності

## Можливості розширення

### Потенційні удосконалення
1. **Мікросервісна архітектура** - розділення на сервіси
2. **API-first підхід** - RESTful API
3. **Кешування** - Redis для швидшого доступу
4. **Повнотекстовий пошук** - Elasticsearch
5. **Машинне навчання** - для автоматичного пошуку спільнокореневих слів

### Масштабування
- **Горизонтальне масштабування** - додавання серверів
- **Балансування навантаження** - розподіл запитів
- **Кластеризація БД** - для високої доступності

## Відомі обмеження

1. **Монолітна архітектура** - складність масштабування
2. **Синхронні операції** - в деяких частинах коду
3. **Відсутність API** - тільки веб-інтерфейс
4. **Обмежена підтримка мов** - тільки одна мова аналізу
5. **Жорсткі зв'язки** - між компонентами системи

## Висновок

FirstWordsAnalyzer - це спеціалізована система для лінгвістичного аналізу, яка демонструє класичну архітектуру ASP.NET MVC з елементами сучасних патернів проектування. Система має потенціал для подальшого розвитку в напрямку мікросервісної архітектури та використання сучасних технологій машинного навчання.